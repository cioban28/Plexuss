$(document).ready(function(){if(!Array.prototype.filter){Array.prototype.filter=function(fun){'use strict';if(this===void 0||this===null){throw new TypeError();}var t=Object(this);var len=t.length>>>0;if(typeof fun!=='function'){throw new TypeError();}var res=[];var thisArg=arguments.length>=2?arguments[1]:void 0;for(var i=0;i<len;i++){if(i in t){var val=t[i];if(fun.call(thisArg,val,i,t)){res.push(val);}}}return res;};}});Plex.rightHandSideCarousel={globalOwlItemAmount:0,numberOfNext:1,isAjaxRunning:false,customCityId:-1,};Plex.emailOptions={currentEmail_addr:'',newEmail_addr:'',ajax_data:'',ajax_route:'/ajax/resendconfirmemail',email_domain:'',emailPattern:'',optionSet:null,};Plex.inviteContacts={skipFirstTimeModal_clicked:false,inviteList:[],};function slideMenu(elem,speed){var s=speed||'slow';if(elem.hasClass('closed')){elem.slideUp(s,function(){$(elem).removeClass('closed');});}else{elem.slideDown(s,function(){$(elem).addClass('closed');});}}function fadeToggle(el,speed){var s=speed||'fast';if(el.hasClass('open')){el.fadeOut(s,function(){$(el).removeClass('open');});}else{el.fadeIn(s,function(){$(el).addClass('open');});}}function showTooltip(el){var tooltipBox=el.parent().parent().find('.tooltip-desc');var statBoxH=el.parent().parent().outerHeight();tooltipBox.css('margin-top',(statBoxH+10)+'px');tooltipBox.show();var boxX=tooltipBox.offset().left;var toolX=el.offset().left;var delta=toolX-boxX;tooltipBox.find('.arrow').css('left',delta+'px');return tooltipBox;}$(document).foundation();$(document).ready(function(){var engagment_modulez_slider_owl=$('#engagement-modulez-slider');engagment_modulez_slider_owl.owlCarousel({navigation:false,slideSpeed:250,paginationSpeed:400,singleItem:true,autoPlay:false,stopOnHover:true,pagination:false,mouseDrag:false,touchDrag:false,autoHeight:false,beforeMove:function(elem){Plex.rightHandSideCarousel.globalOwlItemAmount=this.itemsAmount;}});$('.page-listed').on('click',function(e){var nav=$('.college-nav-options');if(nav.is(':visible')){nav.slideUp(300);}else{nav.slideDown(300);}})
Plex.rightHandSideCarousel.init_city_location_change('.select_new_location','.edit-location-near-you-form','/getCities');var optionSet1={startDate:moment(),endDate:moment(),minDate:'01/01/2010',maxDate:'12/31/2035',dateLimit:{days:360},showDropdowns:true,showWeekNumbers:true,timePicker:false,timePickerIncrement:1,timePicker12Hour:true,ranges:{'Today':[moment(),moment()],'Yesterday':[moment().subtract('days',1),moment().subtract('days',1)],'Last 7 Days':[moment().subtract('days',6),moment()],'Last 30 Days':[moment().subtract('days',29),moment()],'This Month':[moment().startOf('month'),moment().endOf('month')],'Last Month':[moment().subtract('month',1).startOf('month'),moment().subtract('month',1).endOf('month')]},opens:'right',buttonClasses:['btn btn-default'],applyClass:'btn-small btn-primary',cancelClass:'btn-small',format:'MM/DD/YYYY',separator:' to ',autoUpdateInput:false,locale:{applyLabel:'Submit',cancelLabel:'Clear',fromLabel:'From',toLabel:'To',customRangeLabel:'Custom',daysOfWeek:['Su','Mo','Tu','We','Th','Fr','Sa'],monthNames:['January','February','March','April','May','June','July','August','September','October','November','December'],firstDay:1}};Plex.optionSet=optionSet1;$(".dash-cal").daterangepicker(optionSet1,function(start,end,label){});$(".dash-cal").on('cancel.daterangepicker',function(ev,picker){$(".dash-cal").val("");});$(document).on('click','button.upgrade-btn',function(){$('.upgradeNotify-ad').toggle();});$('.recruitment-dropdown').on('click',function(){var elem=$('#recruit-dropdown');elem.toggle();if($('#comm-dropdown').css('display')!='none')$('#comm-dropdown').toggle();if($('#tools_dropdown').css('display')!='none')$('#tools_dropdown').toggle();});$('.communication-drop').on('click',function(){var elem=$('#comm-dropdown');elem.toggle();if($('#recruit-dropdown').css('display')!='none')$('#recruit-dropdown').toggle();if($('#tools_dropdown').css('display')!='none')$('#tools_dropdown').toggle();});$('#tools_topnav').on('click',function(event){$('#tools_dropdown').toggle();if($('#recruit-dropdown').css('display')!='none')$('#recruit-dropdown').toggle();if($('#comm-dropdown').css('display')!='none')$('#comm-dropdown').toggle();});$(document).on('touchstart','.tooltip-qu',function(event){event.stopPropagation();var tooltipBox=$(this).parent().parent().find('.tooltip-desc');if(tooltipBox.css('display')==='none'){showTooltip($(this));}else{tooltipBox.hide();}});$(document).on('mouseenter','.tooltip-qu',function(event){event.stopPropagation();showTooltip($(this));})
$(document).on('mouseleave','.tooltip-qu',function(event){event.stopPropagation();var tooltipBox=$(this).parent().parent().find('.tooltip-desc');tooltipBox.hide();});$(document).on('focus','.dash-cal',function(){var optionSet1=Plex.optionSet;$(".dash-cal").daterangepicker(optionSet1,function(start,end,label){});$(".dash-cal").on('cancel.daterangepicker',function(ev,picker){$(".dash-cal").val("");});});$(document).on('click',function(event){event.stopPropagation();if(!$(event.target).is('#tools_topnav')&&!$(event.target).is('.communication-drop')&&!$(event.target).is('.recruitment-dropdown')){if($('#recruit-dropdown').css('display')!='none')$('#recruit-dropdown').toggle();if($('#comm-dropdown').css('display')!='none')$('#comm-dropdown').toggle();if($('#tools_dropdown').css('display')!='none')$('#tools_dropdown').toggle();}if(!$(event.target).hasClass('tooltip-qu')){$('.tooltip-desc').map(function(){if($(this).css('display')!='none')$(this).hide();});}if(!$(event.target).hasClass('upgrade-btn')&&!$(event.target).hasClass('sendReq')&&!$(event.target).hasClass('alreadyReq')){if($('.upgradeNotify-ad').css('display')!='none')$('.upgradeNotify-ad').hide();}});});Plex.rightHandSideCarousel.init_city_location_change=function(element,append,route){$(element).autocomplete({source:route,appendTo:$(this).closest('div.change-location-section').find(append),select:function(event,ui){Plex.rightHandSideCarousel.newInputFieldValue(ui.item);return false;}});};Plex.rightHandSideCarousel.newInputFieldValue=function(item){$('#city_location_data').val(item.label);$('input.select_new_location').val(item.label);$('.modulez-near-you-location .edit-near-you-location-btn').val(item.city+', '+item.state);Plex.rightHandSideCarousel.customCityId=item.id;Plex.rightHandSideCarousel.rightHandSideCarousel($('#engagement-modulez-slider'));}
$(document).on('focus','.select_new_location',function(){$('ul.ui-autocomplete').addClass('edit-location-autocomplete');});$(document).on('focusout','.select_new_location',function(){$('ul.ui-autocomplete').removeClass('edit-location-autocomplete');});$(document).on('click','.engagement-modulez-skip-btn',function(){if(Plex.rightHandSideCarousel.isAjaxRunning){return;}Plex.rightHandSideCarousel.goToNextCarousel();});Plex.setIndividualPalgeLikeTally=function(type,type_col,type_val,_th){var _this=$(_th);if(Plex.rightHandSideCarousel.isAjaxRunning){return;}Plex.rightHandSideCarousel.isAjaxRunning=true;$.ajax({url:'/ajax/setLikesTally',type:'POST',data:{type:type,type_col:type_col,type_val:type_val},headers:{'X-CSRF-TOKEN':$('meta[name="csrf-token"]').attr('content')},}).done(function(){Plex.rightHandSideCarousel.isAjaxRunning=false;if($("."+_this.parent().parent().attr('class')+" .likes #like_img").attr("src")!="/images/social/like-icon-orange.png"){$("."+_this.parent().parent().attr('class')+" .likes #like_img").attr("src","/images/social/like-icon-orange.png");var likesTally=$("."+_this.parent().parent().attr('class')+" .likes #number_of_likes");likesTally.text(parseInt(likesTally.text())+1);}});}
Plex.rightHandSideCarousel.goToNextCarousel=function(){var engagment_modulez_slider_owl=$('#engagement-modulez-slider');if(Plex.rightHandSideCarousel.numberOfNext==Plex.rightHandSideCarousel.globalOwlItemAmount){Plex.rightHandSideCarousel.rightHandSideCarousel(engagment_modulez_slider_owl);}else{engagment_modulez_slider_owl.trigger('owl.next');Plex.rightHandSideCarousel.numberOfNext++;}}
Plex.setLikeTally=function(type,type_col,type_val){if(Plex.rightHandSideCarousel.isAjaxRunning){return;}$('.like-animation').show();setTimeout(function(){Plex.rightHandSideCarousel.isAjaxRunning=true;$.ajax({url:'/ajax/setLikesTally',type:'POST',data:{type:type,type_col:type_col,type_val:type_val},headers:{'X-CSRF-TOKEN':$('meta[name="csrf-token"]').attr('content')},}).done(function(){$('.like-animation').hide();Plex.rightHandSideCarousel.isAjaxRunning=false;Plex.rightHandSideCarousel.goToNextCarousel();});},500)}
$(document).on('click','.edit-near-you-location-btn, .close-edit-location-form',function(e){var top_level_parent=$(this).closest('.edit-location-row');var this_parent=$(this).closest('div.change-location-section');e.preventDefault();$(top_level_parent).find('div.change-location-section:hidden').show();this_parent.hide();});Plex.rightHandSideCarousel.rightHandSideCarousel=function(thisOwl){if(Plex.rightHandSideCarousel.isAjaxRunning){return;}Plex.rightHandSideCarousel.isAjaxRunning=true;var _thisOwl=thisOwl;$('#right-side-engagement-ajax-loader').fadeIn(250);setTimeout(function(){$.ajax({url:'/ajax/righthandsidecarousel',type:'GET',data:{cityId:Plex.rightHandSideCarousel.customCityId},headers:{'X-CSRF-TOKEN':$('meta[name="csrf-token"]').attr('content')},}).done(function(result){Plex.rightHandSideCarousel.isAjaxRunning=false;var obj=$.parseJSON(result);var htmlData='';$('#right-side-engagement-ajax-loader').fadeOut(250);if(obj.data[0].length!=0){htmlData=Plex.rightHandSideCarousel.generateRightHandSideCarousel(obj.type,obj.data,obj);_thisOwl.data('owlCarousel').addItem(htmlData);if(obj.type=='news'||obj.type=="near you"){$(document).foundation('interchange','reflow');}}if(Plex.rightHandSideCarousel.customCityId!=-1){if(Plex.rightHandSideCarousel.globalOwlItemAmount==0){$(_thisOwl).trigger('owl.jumpTo',6);Plex.rightHandSideCarousel.numberOfNext=7;}else{$(_thisOwl).trigger('owl.jumpTo',Plex.rightHandSideCarousel.globalOwlItemAmount+1);Plex.rightHandSideCarousel.numberOfNext=Plex.rightHandSideCarousel.globalOwlItemAmount-3;}Plex.rightHandSideCarousel.customCityId=-1;}else{$(_thisOwl).trigger('owl.jumpTo',Plex.rightHandSideCarousel.numberOfNext);Plex.rightHandSideCarousel.numberOfNext++;}Plex.rightHandSideCarousel.init_city_location_change('.select_new_location','.edit-location-near-you-form','/getCities');});},500);}
Plex.rightHandSideCarousel.generateRightHandSideCarousel=function(type,dt,obj){var htmlData='';var _dt=dt;if(type=='ranking'){$.each(_dt,function(index,el){htmlData+='<div class="item">';htmlData+='<div class="row collapse modulez-ranking-row">';htmlData+='<div class="column small-12">';htmlData+='<div class="equal-heights-main">';htmlData+='<div class="row equal-heights-top">';htmlData+='<div class="column small-12">';htmlData+='<div class="row">';htmlData+='<div class="column small-12 modulez-ranking-title text-center">';htmlData+='other rankings';htmlData+='</div>';htmlData+='</div>';htmlData+='<div class="row">';htmlData+='<div class="column small-12 modulez-ranking-type-name text-center">';htmlData+=el[0].title;htmlData+='</div>';htmlData+='</div>';htmlData+='</div>';htmlData+='</div>';if(el[0].listImage!=''){htmlData+='<div class="row equal-heights-upper-middle">';htmlData+='<div class="column small-12 modulez-ranking-type-img text-center">';htmlData+='<img src="'+el[0].listImage+'">';htmlData+='</div>';htmlData+='</div>';}htmlData+='<div class="row collapse modulez-ranking-container equal-heights-lower-middle">';htmlData+='<div class="column small-12">';$.each(el,function(index2,el2){htmlData+='<div class="row modulez-ranking-university-row" data-equalizer>';htmlData+='<div class="column medium-3 text-center modulez-rank-number-container" data-equalizer-watch>';htmlData+='<div class="modulez-rank-number">#'+el2.rank+'</div>';htmlData+='</div>';htmlData+='<div class="column medium-9 modulez-university-name medium-text-center large-text-left" data-equalizer-watch>';htmlData+='<a href="/college/'+el2.slug+'" class="university-name-link">';htmlData+=el2.school_name;htmlData+='</a>';htmlData+='</div>';htmlData+='</div>';});htmlData+='</div>';htmlData+='</div>';htmlData+='</div>';htmlData+='<div class="row modulez-ranking-engagement-btns-row equal-heights-bottom">';htmlData+='<div class="column medium-4">';htmlData+='<div class="modulez-ranking-engagement-btns text-center engagement-modulez-like-btn" '+"onClick='Plex.setLikeTally("+'"'+el[0].like_type+'", "'+el[0].like_type_col+'", "'+el[0].like_type_val+'");'+"'"+'>Like</div>';htmlData+='</div>';htmlData+='<div class="column small-4">';htmlData+='<a href="'+obj.link+'">';htmlData+='<div class="modulez-ranking-engagement-btns text-center">';htmlData+='View';htmlData+='</div>';htmlData+='</a>';htmlData+='</div>';htmlData+='<div class="column medium-4">';htmlData+='<div class="modulez-ranking-engagement-btns text-center engagement-modulez-skip-btn">Skip</div>';htmlData+='</div>';htmlData+='</div>';htmlData+='</div>';htmlData+='</div>';htmlData+='</div>';});}else if(type=='news'){$.each(_dt,function(index,el){htmlData+='<div class="item">';htmlData+='<div class="row collapse modulez-news-row">';htmlData+='<div class="column small-12">';htmlData+='<div class="equal-heights-main">';htmlData+='<div class="row equal-heights-top">';htmlData+='<div class="column small-12 modulez-news-title text-center">';htmlData+='latest news';htmlData+='</div>';htmlData+='</div>';htmlData+='<div class="row equal-heights-upper-middle">';htmlData+='<div class="column small-12 modulez-news-article-header">';htmlData+='<div class="row collapse">';htmlData+='<div class="column small-12 text-left modulez-news-articlename">';htmlData+=el.title;htmlData+='</div>';htmlData+='</div>';htmlData+='<div class="row collapse modulez-news-article-details-row">';htmlData+='<div class="column medium-12 large-6 text-left">';htmlData+='by '+el.author;htmlData+='</div>';htmlData+='<div class="column medium-12 large-6 text-left">';htmlData+=el.date;htmlData+='</div>';htmlData+='</div>';htmlData+='</div>';htmlData+='</div>';htmlData+='<div class="row modulez-article-background-img-row equal-heights-lower-middle">';htmlData+='<div class="column small-12 modulez-news-school-img-col" data-interchange="['+el.img+', (default)]">';htmlData+='<div class="modulez-news-article-category '+el.catSlug+'-category-color">'+el.catName+'</div>';htmlData+='</div>';htmlData+='</div>';htmlData+='</div>';htmlData+='<div class="row modulez-news-engagement-btns-row equal-heights-bottom">';htmlData+='<div class="column small-4">';htmlData+='<div class="modulez-news-engagement-btns text-center engagement-modulez-like-btn" '+"onClick='Plex.setLikeTally("+'"'+el.like_type+'", "'+el.like_type_col+'", "'+el.like_type_val+'");'+"'"+'>Like</div>';htmlData+='</div>';htmlData+='<div class="column small-4">';htmlData+='<a href="/news/article/'+el.slug+'">';htmlData+='<div class="modulez-news-engagement-btns text-center">View</div>';htmlData+='</a>';htmlData+='</div>';htmlData+='<div class="column small-4">';htmlData+='<div class="modulez-news-engagement-btns text-center engagement-modulez-skip-btn">Skip</div>';htmlData+='</div>';htmlData+='</div>';htmlData+='</div>';htmlData+='</div>';htmlData+='</div>';});}else if(type=='near you'){$.each(_dt,function(index,el){htmlData+='<div class="item">';htmlData+='<div class="row collapse modulez-near-you-row">';htmlData+='<div class="column small-12">';htmlData+='<div class="equal-heights-main">';htmlData+='<div class="row equal-heights-top">';htmlData+='<div class="column small-12 modulez-near-you-title text-center">';htmlData+='ranked universities in your area';htmlData+='</div>';htmlData+='</div>';htmlData+='<div class="row edit-location-row equal-heights-upper-middle">';htmlData+='<div class="column small-12 modulez-near-you-location text-center change-location-section">';htmlData+='<div class="edit-near-you-location-btn">';htmlData+=el.userCityName+', '+el.userStateName;htmlData+='<img src="https://s3-us-west-2.amazonaws.com/asset.plexuss.com/icons/pencil_edit.png" alt="edit city">';htmlData+='</div>';htmlData+='</div>';htmlData+='<div class="column small-12 change-location-section location-input">';htmlData+='<form accept-charset="UTF-8" action="/" method="POST">';htmlData+='<div id="edit-colleges-near-you" class="row collapse edit-location-near-you-form">';htmlData+='<div class="column small-9 large-10">';htmlData+='<input id="selectivity_form" class="select_new_location" type="text" value="" name="update_location" placeholder="Change location...">';htmlData+='</div>';htmlData+='<div class="column small-3 large-2">';htmlData+='<a href="" class="button postfix close-edit-location-form">X</a>';htmlData+='</div>';htmlData+='</div>';htmlData+='</form>';htmlData+='</div>';htmlData+='</div>';htmlData+='<div class="row collapse modulex-near-you-background-img-logo-name-container equal-heights-lower-middle">';htmlData+='<div class="column small-12 modulez-near-you-school-img-col" data-interchange="[https://s3-us-west-2.amazonaws.com/asset.plexuss.com/college/overview_images/'+el.img_url+', (default)], [https://s3-us-west-2.amazonaws.com/asset.plexuss.com/college/overview_images/'+el.img_url+', (medium)]">';htmlData+='<div class="near-you-college-logo" data-interchange="[https://s3-us-west-2.amazonaws.com/asset.plexuss.com/college/logos/'+el.logo_url+', (default)]"></div>';htmlData+='<div class="near-you-college-rank">#'+el.rank+'</div>';htmlData+='<div class="modulez-near-you-school-name text-center">'+el.school_name+'</div>';htmlData+='</div>';htmlData+='</div>';htmlData+='</div>';htmlData+='<div class="row modulez-near-you-engagement-btns-row equal-heights-bottom">';htmlData+='<div class="column small-4">';htmlData+='<div class="modulez-near-you-engagement-btns text-center engagement-modulez-like-btn" '+"onClick='Plex.setLikeTally("+'"'+el.like_type+'", "'+el.like_type_col+'", "'+el.like_type_val+'");'+"'"+'>Like</div>';htmlData+='</div>';htmlData+='<div class="column small-4">';htmlData+='<a href="/college/'+el.slug+'">';htmlData+='<div class="modulez-near-you-engagement-btns text-center">';htmlData+='View';htmlData+='</div>';htmlData+='</a>';htmlData+='</div>';htmlData+='<div class="column small-4">';htmlData+='<div class="modulez-near-you-engagement-btns text-center engagement-modulez-skip-btn">Skip</div>';htmlData+='</div>';htmlData+='</div>';htmlData+='</div>';htmlData+='</div>';htmlData+='</div>';});}return htmlData;}
Plex.rightHandSideCarousel.viewCollegeComparison=function(_this){window.location='/comparison/?UrlSlugs='+_this;}
function stickHeader(divID,offsetDiv){(function($){var floatingHeaderActive=false;$(document).ready(function(){$(document).scroll(function(eD,eO){var battleobj=$('.'+offsetDiv).offset();battleobjTop=battleobj.top;if(!floatingHeaderActive&&$(window).scrollTop()>parseInt(battleobjTop)){floatingHeaderActive=true;$('.'+divID).fadeIn();}if(floatingHeaderActive&&$(window).scrollTop()<parseInt(battleobjTop)){floatingHeaderActive=false;$('.'+divID).fadeOut();}});});})(jQuery);}function collegeAutocomplete(txtID,txthiddenId){$("#"+txtID).autocomplete();$(function(){$("#"+txtID).autocomplete({source:"/getAutoCompleteData?zipcode="+'95376'+"&type=college",minLength:1,select:function(event,ui){$(this).data('hsname',ui.item.label)
$('#'+txthiddenId).val(ui.item.slug);}});$("#"+txtID).change(function(){var _this=$(this);if(_this.val()!==_this.data('hsname')){_this.val('');}});});$("#"+txtID).change(function(){var _this=$(this);if(_this.val()!==_this.data('hsname')){_this.val('');}});}function accessLoader(idOrClass){$(idOrClass).toggleClass("adjustdata");}$(window).load(function(){Plex.emailOptions.currentEmail_addr=$('.change-email').data('current-email');Plex.emailOptions.email_domain=$('.go-to-email').data('email-domain');$('.go-to-email').on('click',function(){Plex.emailOptions.email_domain=$(this).data('email-domain');window.open(Plex.emailOptions.email_domain,'_blank');});$('.resend-email').on('click',function(){Plex.emailOptions.emailAjax('resend');});$('.change-email').on('click',function(){if($('#change-email-modal').length===0){var changeEmailModal='';changeEmailModal+='<div id="change-email-modal" class="reveal-modal" data-reveal aria-labelledby="modalTitle" aria-hidden="true" role="dialog">';changeEmailModal+='<div class="row"><div class="column small-12 text-right">';changeEmailModal+='<a class="close-reveal-modal" aria-label="Close">&#215;</a>';changeEmailModal+='</div></div>';changeEmailModal+='<div class="change-email-container">';changeEmailModal+='<div class="row update-email-title"><div class="column small-12">';changeEmailModal+='Update Email';changeEmailModal+='</div></div>';changeEmailModal+='<div class="row current-email-label"><div class="column small-12">';changeEmailModal+='Your current email is: <span class="curr-email-is">'+Plex.emailOptions.currentEmail_addr+'</span>';changeEmailModal+='</div></div>';changeEmailModal+='<form action="" method="post" data-abide>';changeEmailModal+='<div class="row new-email-label">';changeEmailModal+='<div class="column small-12 medium-4">';changeEmailModal+='<label>New email address</label>';changeEmailModal+='</div>';changeEmailModal+='<div class="column small-12 medium-8">';changeEmailModal+='<form action="" method="post">';changeEmailModal+='<input type="email" class="new-email-addr-input" required pattern="email" />';changeEmailModal+='<small class="error" style="display: none;">Not a valid email address</small>';changeEmailModal+='</div>';changeEmailModal+='</div>';changeEmailModal+='</form>';changeEmailModal+='<div class="update-email-err">';changeEmailModal+='This email already exists - please try again.';changeEmailModal+='</div>';changeEmailModal+='<div class="row"><div class="column small-12 text-right">';changeEmailModal+='<span class="close-reveal-modal cancel-btn">Cancel</span> <span class="update-email-btn" onClick="Plex.emailOptions.emailAjax('+"'change'"+');">Update</span>';changeEmailModal+='</div></div>';changeEmailModal+='</div>'
changeEmailModal+='<div class="change-email-success-container">';changeEmailModal+='<div class="row">';changeEmailModal+='<div class="column small-12 medium-11 small-centered text-center">';changeEmailModal+='<div>Your email address has been successfully changed to <span class="success-msg-curr-email">'+Plex.emailOptions.currentEmail_addr+'</span>!</div>';changeEmailModal+='<div>Check your new email address for your confirmation email.</div>';changeEmailModal+='<div><a class="go-to-email-after-emailChange" href="'+Plex.emailOptions.email_domain+'" target="_blank">Go to Email</a></div>';changeEmailModal+='<div>Still need help?</div>';changeEmailModal+='<div><span class="resend-after-emailChange" onClick="'+"Plex.emailOptions.emailAjax('resend')"+'" target="_blank">Resend Email</span></div>';changeEmailModal+='<div class="close-reveal-modal">Close</div>';changeEmailModal+='</div></div></div>';changeEmailModal+='</div>';$('body').append(changeEmailModal);}if($('.change-email-container').css('display')==='none'){$('.change-email-container').show();$('.change-email-success-container').hide();}$('#change-email-modal').foundation('reveal','open',{close_on_background_click:true});});});Plex.emailOptions.emailAjax=function(operation){var is_valid=true;if(operation==='change'){if(Plex.emailOptions.isNewEmailValid($('.new-email-addr-input').val())){Plex.emailOptions.newEmail_addr=$('.new-email-addr-input').val();Plex.emailOptions.ajax_data={new_email:Plex.emailOptions.newEmail_addr};is_valid=true;$('#change-email-modal .error').hide();}else{is_valid=false;$('#change-email-modal .error').show().css({'display':'block'});}}if(operation==='resend'){Plex.emailOptions.ajax_data={operation:'resend'};}if(is_valid){$.ajax({type:'POST',url:Plex.emailOptions.ajax_route,data:Plex.emailOptions.ajax_data,headers:{'X-CSRF-TOKEN':$('meta[name="csrf-token"]').attr('content')},success:function(data){if(data==='success'){if($('.update-email-err').is(':visible'))$('.update-email-err').hide();Plex.emailOptions.currentEmail_addr=Plex.emailOptions.newEmail_addr;Plex.emailOptions.email_domain=Plex.emailOptions.getEmailProvider(Plex.emailOptions.newEmail_addr);if(operation==='resend'){$('.resend-email').parent().fadeOut();$('.pls-confirm-msg').html('Another email has been sent to <span class="sent-to-email">'+Plex.emailOptions.currentEmail_addr+'</span>. Still having problems?');if($('#change-email-modal').css('display')!=='none'){$('#change-email-modal').foundation('reveal','close');}}else if(operation==='change'){$('.pls-confirm-msg').html('Your email address has been successfully changed to <span class="sent-to-email">'+Plex.emailOptions.currentEmail_addr+'</span>. Confirm your account at this new address.');$('.curr-email-is').html(Plex.emailOptions.currentEmail_addr);$('.success-msg-curr-email').html(Plex.emailOptions.currentEmail_addr);$('.go-to-email-after-emailChange').attr('href',Plex.emailOptions.email_domain);$('.go-to-email').data('email-domain',Plex.emailOptions.email_domain);$('.new-email-addr-input').val('');$('.change-email-container').slideUp();$('.change-email-success-container').slideDown();}}else{$('.update-email-err').show();}},error:function(err){console.log(err);}});}}
Plex.emailOptions.isNewEmailValid=function(email){Plex.emailOptions.emailPattern=new RegExp(/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/);return Plex.emailOptions.emailPattern.test(email);}
Plex.emailOptions.getEmailProvider=function(email){var provider=email.substr(email.indexOf("@")+1);switch(provider){case'yahoo.com':case'aol.com':case'aim.com':provider='https://mail.'+provider;break;case'gmail.com':provider='https://mail.google.com';break;case'comcast.net':provider='https://login.'+provider+'/login';break;default:provider='https://'+provider;break;}return provider;}
function openTranscriptPreview(element){var previewLink=$('#transcript_preview_link');var previewModal=$('#transcript-preview-modal');var previewLinkName=$(element).data('transcript-name');var filetype=previewLinkName.split(".").pop();var preImgRow=$('.transcript_preview_img');var showPreview='';if(filetype=='jpeg'||filetype=='jpg'||filetype=='png'||filetype=='gif'||filetype=='bmp'){var previewImg='';previewImg+='<img src="https://s3-us-west-2.amazonaws.com/asset.plexuss.com/users/transcripts/';previewImg+=previewLinkName;previewImg+='" alt="Uploaded Transcript" />';showPreview=previewImg;}else{var pdfPreview='<iframe src="https://docs.google.com/gview?url=https://s3-us-west-2.amazonaws.com/asset.plexuss.com/users/transcripts/';pdfPreview+=previewLinkName;pdfPreview+='&embedded=true" style="width:100%; height:500px;" frameborder="0"></iframe>';showPreview=pdfPreview;}preImgRow.html(showPreview);previewModal.foundation('reveal','open');}$(document).on('click','#inviteFriendsModal .send-these-invites-btn',function(e){e.preventDefault();Plex.inviteContacts.updateInviteList();Plex.inviteContacts.sendInvites();});$(document).on('click','.firstTime_skipBtn',function(){Plex.inviteContacts.skipFirstTimeModal_clicked=true;});$(document).on('change','#select-all-contacts-checkbox',function(){if($(this).is(':checked')){$('.contact-checkbox').prop('checked',true);}else{$('.contact-checkbox').prop('checked',false);}Plex.inviteContacts.toggleSelectedContacts($('.contact-checkbox').closest('.contact-row.contact-invitee'));Plex.inviteContacts.updateInviteList();});$(document).on('click','.contact-row.contact-invitee',function(){var chkbox=$(this).find('.contact-checkbox');chkbox.prop('checked',!chkbox.prop('checked'));Plex.inviteContacts.selectAllToggle();Plex.inviteContacts.toggleSelectedContacts($(this));Plex.inviteContacts.updateInviteList();});Plex.inviteContacts.toggleSelectedContacts=function(contact){$.each(contact,function(){if($(this).find('.contact-checkbox').is(':checked')){$(this).addClass('selected');}else{$(this).removeClass('selected');}});};Plex.inviteContacts.selectAllToggle=function(){var all_checked=true;$('.contact-checkbox').each(function(){if(!$(this).is(':checked')){all_checked=false;return false;}});if(all_checked){$('#select-all-contacts-checkbox').prop('checked',true);}else{$('#select-all-contacts-checkbox').prop('checked',false);}};Plex.inviteContacts.updateInviteList=function(){var selectedContacts=$('.contact-checkbox:checked');Plex.inviteContacts.inviteList=[];if(selectedContacts.length>0){$.each(selectedContacts,function(){var invite_me_name=$(this).data('name');var invite_me_email=$(this).attr('id');Plex.inviteContacts.inviteList.push({invite_me_name:invite_me_name,invite_me_email:invite_me_email});});}};Plex.inviteContacts.sendInvites=function(){$.ajax({url:'/ajax/sendInvites',type:'POST',data:JSON.stringify(Plex.inviteContacts.inviteList),contentType:"application/json; charset=utf-8",headers:{'X-CSRF-TOKEN':$('meta[name="csrf-token"]').attr('content')},}).done(function(ret){$('.send-these-invites-btn').fadeOut(250).closest('.invite-contacts-button-row').find('span').fadeOut(250);$('.contact-checkbox:checked').closest('.contact-row.contact-invitee').slideUp(250).remove();});};Plex.inviteContacts.openInviteModal=function(){var signup_email=$('#inviteFriendsModal').data('email');var had_no_email=$('input[name="no_email"]');var e_provider='';var invite_route='';if(Plex.inviteContacts.getUrlParameter('param')!=='invite'){if(signup_email!==''||signup_email!==undefined||signup_email!=='undefined'){e_provider=Plex.inviteContacts.getEmailProvider(signup_email);}else if(had_no_email.length>0){e_provider=Plex.inviteContacts.getEmailProvider(had_no_email.val());}if(e_provider!==''){invite_route=Plex.inviteContacts.getInviteRoute(e_provider);if(invite_route!=='unknown'){window.location.href=invite_route;}else{Plex.inviteContacts.toggleInviteButtonsRow();}}}else{Plex.inviteContacts.updateInviteList();}$('#inviteFriendsModal').foundation('reveal','open');};Plex.inviteContacts.toggleInviteButtonsRow=function(){var button_row=$('#inviteFriendsModal .invite-options-row');var header=$('#inviteFriendsModal .invite-head.dynamic > h3');if(button_row.hasClass('hidden')){button_row.removeClass('hidden');header.html('Find contacts from one of the following options');}else{button_row.addClass('hidden');header.html('It\'s easy, we imported some from your email for you');}};Plex.inviteContacts.closeInviteModal=function(){$('#inviteFriendsModal').foundation('reveal','close');};Plex.inviteContacts.getEmailProvider=function(email){return email===undefined?'':email.slice(email.indexOf('@')+1,email.lastIndexOf('.'));};Plex.inviteContacts.getInviteRoute=function(provider){var route='';switch(provider){case'gmail':route='/googleInvite';break;case'hotmail':case'outlook':route='/microsoftInvite';break;default:route='unknown';break;}return route;};Plex.inviteContacts.getUrlParameter=function(sParam){var sPageURL=decodeURIComponent(window.location.search.substring(1)),sURLVariables=sPageURL.split('&'),sParameterName,i;for(i=0;i<sURLVariables.length;i++){sParameterName=sURLVariables[i].split('=');if(sParameterName[0]===sParam){return sParameterName[1]===undefined?true:sParameterName[1];}}};$(document).on('click',function(e){var target=$(e.target),upgrade_notify=$('ul.innerpages-lower-nav-ul-rightside .upgradeNotify');if(target.hasClass('upgrade')){if(upgrade_notify.hasClass('hide'))upgrade_notify.removeClass('hide');else upgrade_notify.addClass('hide');}else if(!target.hasClass('upgradeNotify')&&target.closest('.upgradeNotify').length===0){upgrade_notify.addClass('hide');}});$(document).on('click','ul.innerpages-lower-nav-ul-rightside .upgradeNotify a.sendReq',function(event){event.preventDefault();$('ul.innerpages-lower-nav-ul-rightside .upgradeNotify').addClass('hide');$('ul.innerpages-lower-nav-ul-rightside .upgradeInProcess').removeClass('hide');$.ajax({url:'/admin/upgradeRequest',type:'POST',dataType:'json',data:{'readyToUpgrade':'1'},headers:{'X-CSRF-TOKEN':$('meta[name="csrf-token"]').attr('content')},}).done(function(data){return'success';});});$(document).on('click','.upgradeNotify-ad .button.sendReq',function(event){event.preventDefault();$('.upgradeNotice').hide();$('.upgradeInProc').show();$.ajax({url:'/admin/upgradeRequest',type:'POST',dataType:'json',data:{'readyToUpgrade':'1'},headers:{'X-CSRF-TOKEN':$('meta[name="csrf-token"]').attr('content')},}).done(function(data){return'success';});});$(document).on('click','.upgradeNotify-ad .button.alreadyReq',function(event){event.preventDefault();$('.upgradeNotify-ad').hide();});$(document).on('click','ul.innerpages-lower-nav-ul-rightside .upgradeInProcess a.alreadyReq',function(){$('.innerpages-lower-nav-ul-rightside .upgradeInProcess').addClass('hide');});$(document).on('click','.recruitment-btn.is-redirect',function(e){e.preventDefault();Plex.userSession.set($(this).data('cid'));window.location.href='/get_started';});Plex.userSession=Plex.userSession||{};Plex.userSession.set=function(route){sessionStorage.setItem('college_id',JSON.stringify(route));};Plex.userSession.get=function(key){return JSON.parse(sessionStorage.getItem(key));};$(document).on('click','#tmp-toastr .close',function(){$(this).parent().remove();});