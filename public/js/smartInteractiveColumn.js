var sic={barTop:null,scrollClass:'',student:{},lastResize:$(window).width(),sicinitialH:$('#_sic .sic-content-wrapper').innerHeight(),step:'basic',incompleteList:[],APP_ROUTES:[{path:'/college-application/basic',id:'basic',next:'identity',name:'Basic Info'},{path:'/college-application/identity',id:'identity',next:'planned_start',name:'Identity',notNavItem:true},{path:'/college-application/planned_start',id:'start',next:'contact',name:'Planned Start'},{path:'/college-application/contact',id:'contact',next:'study',name:'Contact Info'},{path:'/college-application/study',id:'study',next:'citizenship',name:'Study in Country',notNavItem:true},{path:'/college-application/citizenship',id:'citizenship',next:'financials',name:'Citizenship'},{path:'/college-application/financials',id:'financials',next:'gpa',name:'Financials'},{path:'/college-application/gpa',id:'gpa',next:'scores',name:'GPA'},{path:'/college-application/scores',id:'scores',next:'colleges',name:'Scores'},{path:'/college-application/colleges',id:'colleges',next:'uploads',name:'Select Colleges'},{path:'/college-application/uploads',id:'uploads',next:'courses',name:'Uploads'},{path:'/college-application/essay',id:'essay',next:'submit',name:'Essay'},{path:'/college-application/submit',id:'submit',next:'review',name:'Submit',notNavItem:true},{path:'/college-application/review',id:'review',next:'',name:'Review Application',notNavItem:true},],EXAMS:[oneApp.ACT,oneApp.PRE_16_SAT,oneApp.POST_16_SAT,oneApp.PRE_16_PSAT,oneApp.POST_16_PSAT,oneApp.GED,oneApp.AP,oneApp.TOEFL,oneApp.IELTS,oneApp.PTE,oneApp.LSAT,oneApp.GMAT,oneApp.GRE,oneApp.OTHER]};sic.sicScroll=function(){var vh=$(window).innerHeight();var wh=$(window).height();var d=(sic.sicinitialH/vh).toFixed(2);var sicH=d*100;$('#_sic .sic-content-wrapper').css('min-height',sicH+'%');};sic.completionStatus=function(section,state){var complete=false,_s=state;switch(section){case'basic':return _s.grad_year&&(_.isFinite(+_s.in_college)&&!_.isNull(_s.in_college))&&+_s.degree_id&&_s.majors.length&&_s.schoolName&&(_.isFinite(+_s.is_transfer)&&!_.isNull(_s.is_transfer));case'identity':return _s.fname&&_s.lname&&_s.birth_date;case'start':return _s.planned_start_term&&_s.planned_start_yr;case'contact':return _s.email&&((_s.preferred_phone&&_s.phone)||(_s.preferred_alternate_phone&&_s.alternate_phone))&&_s.state_id&&_s.country_id&&((_s.line1&&_s.city)||(_s.alternate_line1&&_s.alternate_city));case'citizenship':return _s.country_of_birth&&_s.city_of_birth&&_s.citizenship_status&&_s.languages.length&&_s.num_of_yrs_in_us&&_s.num_of_yrs_outside_us;case'financials':return _s.financial_firstyr_affordibility;case'gpa':return _s.gpa;case'scores':var entire_exam_completed=false;_.each(sic.EXAMS,(exam)=>{let all_entered=false;_.each(exam,(field)=>{if(!_s[field.name]){all_entered=false;return false;}
all_entered=true;});if(all_entered){entire_exam_completed=true;return false;}});return entire_exam_completed;case'colleges':return _s.applyTo_schools.length;case'family':return(!_.isNull(_s.married)||!_.isUndefined(_s.married))&&(!_.isNull(_s.children)&&!_.isUndefined(_s.children))&&(!_.isNull(_s.parents_married)&&!_.isUndefined(_s.parents_married))&&(!_.isNull(_s.siblings)&&!_.isUndefined(_s.siblings));case'awards':return true;case'clubs':return true;case'uploads':return _s.transcripts.length;case'courses':return _s.current_schools.length&&_s.current_schools[0].courses.length&&_s.current_schools[0].courses[0].course_id;case'essay':return _s.essay_content;case'submit':return+_s.terms_of_conditions&&_s.signature;default:return complete;}};sic.circularProgBarPath=function(percent){var circle=$('#_sic .CircularProgressbar-path');if(!percent){percent=100;}
else{var r=circle.attr('r');var c=Math.PI*(r*2);if(percent<0){percent=0;}
if(percent>100){percent=100;}
var pct=((100-(percent-200))/100)*c;circle.css({strokeDashoffset:pct});}};sic.initSIC=function(){var this_js_script=$('script[src="/js/smartInteractiveColumn.js"]');var is_signed_in=this_js_script.data('is_signed_in');var cList=$('#_sic .sections-list.complete');var iList=$('#_sic .sections-list.incomplete');cList.hide();iList.hide();if(is_signed_in){$.ajax({type:'GET',url:'/ajax/getProfileData',headers:{'X-CSRF-TOKEN':$('meta[name="csrf-token"]').attr('content')},}).done(function(response){var res=JSON.parse(response);var percent=res['profile_percent'];var applied=res['applyTo_schools'];$('#_sic .percent-txt').text(percent+'%');sic.circularProgBarPath(percent);var listI='';for(var i in sic.APP_ROUTES){if(sic.completionStatus(sic.APP_ROUTES[i].id,res)){if(!sic.APP_ROUTES[i].notNavItem){listI=$('<div class="s-item">'+'<a href = "'+sic.APP_ROUTES[i].path+'">'+'<span class="">&#10003;</span>'+"&nbsp;"+sic.APP_ROUTES[i].name+'</a></div>');cList.append(listI);}}
else{if(!sic.APP_ROUTES[i].notNavItem){listI=$('<div class="s-item">'+sic.APP_ROUTES[i].id+'</div>');iList.append(listI);sic.incompleteList.push(sic.APP_ROUTES[i].path);}}
cList.show();iList.show();}
$('.sic-continue-btn').attr('href',sic.incompleteList[0]);$('#_sic a.diff.apps').attr('href',sic.incompleteList[0]);if((applied&&applied.length===0)||applied.find(function(value){return value?hasOwnProperty.call(value,'userHasApplied'):false;})===undefined){$('#_sic .subm-school').append($('<div class="fs11">No Submissions yet</div>'));}
else{for(var i in applied){if(applied[i].userHasApplied){$('#_sic .subm-school').append($('<div class="txt-ellpsis"><div class="logo"><img src="'+applied[i].logo_url+'"/></div>'+applied[i].school_name+'</div>'));}}}});}};sic.WebinarChatOn=function(){if($('.daily-chat-bar-container').length){$(' #_sic').css('top',($('.top-bar').offset().top+$('.top-bar').outerHeight())+'px');}};$(window).on('load',function(){sic.sicinitialH=$('#_sic .sic-content-wrapper').innerHeight(),sic.sicScroll();});$(document).ready(function(){sic.initSIC();sic.circularProgBarPath($('#profile-percentage').data('percent'));$(document).on('scroll',function(e){if($('#portal').length)
return;var barTop=sic.barTop,scrollClass=sic.scrollClass,doc=$(this).scrollTop(),bar=$('#_sic'),top=bar.offset().top;if(sic.barTop===null)sic.barTop=top;if(sic.barTop&&doc>sic.barTop){if(!scrollClass){sic.scrollClass='scrolledToTop';bar.addClass(sic.scrollClass);}}else{if(scrollClass){bar.removeClass(sic.scrollClass);sic.scrollClass='';}}});$('.menuPremium-btn').on('click',function(e){if($('#_sic').is(':visible')){if($(document).find('#portal').length){$('#portal-user-window').removeClass('sic-opened');}
$('#_sic').hide("slide",{direction:"right"},500);}else{if($(document).find('#portal').length){$('#portal-user-window').addClass('sic-opened');}
$('#_sic').show("slide",{direction:"right"},500);}
if($(document).find('#portal').length){if(portalBar.hasClass('sic-opened'))
portalBar.removeClass('sic-opened');else
portalBar.addClass('sic-opened');}});$('.mobilePremium-btn').on('click',function(e){var portalBar=$('.floating-header-mobile');if($(document).find('#portal').length){sic.WebinarChatOn();if(portalBar.hasClass('sic-opened'))
portalBar.removeClass('sic-opened');else
portalBar.addClass('sic-opened');}
$('.top-bar').removeClass('expanded');$('.mobile_sic-background').show();$('#_sic').show("slide",{direction:"left"},500);});$('.close-sic-btn').click(function(e){var portalBar=$('.floating-header-mobile');$('.mobile_sic-background').hide("slide",{direction:"left"},500);if($(document).find('#portal').length){$('#portal-user-window').removeClass('sic-opened');portalBar.removeClass('sic-opened');}
$('#_sic').hide("slide",{direction:"right"},500);});$('.mobile-hamburger-menu-toggler-icon').on('click',function(e){$('#_sic').hide();$('.mobile_sic-background').hide();});$('#_sic .expand-stat-btn').on('click',function(e){var cont=$('#_sic .stats-container');if(cont.is(':visible')){$('#_sic .stats-container').slideUp();$(this).html('+');}else{$('#_sic .stats-container').slideDown();$(this).html('&ndash;');}});$(window).resize(function(){sic.sicScroll();var w=$(window).width();var page=$('body').attr('id');if($('#_sic').is(':visible')){if($('#portal').length){$('.floating-header-mobile').addClass('sic-opened');}}else{if((page==='news'||page==='quad-testimonials')&&w>=1025&&w>sic.lastResize){$('#_sic').show();}
else if(page==='college-essays'&&w>=1026&&w>sic.lastResize){$('#_sic').show();}
else if(page==='home'&&w>=962&&w>sic.lastResize){$('#_sic').show();}
else if(page==='college-home'&&w>=1485&&w>sic.lastResize){$('#_sic').show();}
else if((page==='ranking'||page==='comparison')&&w>=1025&&w>sic.lastResize){$('#_sic').show();}
else if(page==='profile'&&w>=1136&&w>sic.lastResize){$('#_sic').show();}
else if(page==='portal'&&w>=640&&w>sic.lastResize){$('#_sic').show();$('#portal-user-window').addClass('sic-opened');}}
if(w>=640){$('.mobile_sic-background').hide("slide",{direction:"left"},500);if(page==='portal')
$('#_sic').css('top','');}
else{if(page==='portal'){sic.WebinarChatOn();}}
sic.lastResize=w;});$('.completeToggle').on('click',function(){var cont=$('#_sic .sections-list.complete');if(cont.is(':visible')){cont.slideUp();$(this).html('+');}else{cont.slideDown();$(this).html('&ndash;');}});$('.incompleteToggle').on('click',function(){var cont=$('#_sic .sections-list.incomplete');if(cont.is(':visible')){cont.slideUp();$(this).html('+');}else{cont.slideDown();$(this).html('&ndash;');}});});