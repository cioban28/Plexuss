var Plex=Plex||{};Plex.fp={};var FP=function(){this.sections=[new FP_Section("message_a_college_carousel",(!0)),new FP_Section("colleges_near_you_carousel",(!0)),new FP_Section("top_ranked_colleges_carousel",(!0)),new FP_Section("college_virtual_tours_carousel",(!0)),new FP_Section("quad_carousel",(!0)),new FP_Section("footer_outro",(!1)),new FP_Section("plex_featured_in",(!1)),new FP_Section("get_started_section",(!1),(!0)),new FP_Section("find_a_college_section",(!1),(!0)),new FP_Section("member_colleges_section",(!1),(!0)),new FP_Section("compare_colleges_section",(!1),(!0))],last_scroll_pos=0};FP.prototype.getNextSection=function(){return _.findWhere(this.sections,{loaded:!1})},FP.prototype.getSectionByName=function(e){return _.findWhere(this.sections,{name:e})},FP.prototype.updateScrollPosition=function(e){this.last_scroll_pos=e},FP.prototype.anySectionCurrentlyLoading=function(){return _.findWhere(this.sections,{currently_loading:!0})},FP.prototype.allSectionsLoaded=function(){return!_.findWhere(this.sections,{loaded:!1,is_nav_section:!1})},FP.prototype.showLoadingGif=function(){$(".section-loader").show()},FP.prototype.hideLoadingGif=function(){$(".section-loader").hide()},FP.prototype.getNavSection=function(e){var t=this.getSectionByName(e);t.loaded||$.ajax({url:"ajax/homepage/getSection/"+e,type:"GET",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}).done(function(e){t.inject(e)})},FP.prototype.loadNextSection=function(){var e=this,t=null;e.showLoadingGif(),t=e.getNextSection(),!t||t.is_nav_section||e.anySectionCurrentlyLoading()||(t.isNowLoading(!0),$.ajax({url:"ajax/homepage/getSection/"+t.name,type:"GET",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}).done(function(o){t.isNowLoading(!1),t.isLoaded(),t.inject(o),e.hideLoadingGif()}))},FP.prototype.isMainContainerInViewport=function(){var e=$("#fp-carousels-container"),t=$(window).scrollTop(),o=t+$(window).height(),n=$(e).offset().top,i=n+$(e).height();return i<=o&&n>=t};var FP_Section=function(e,t,o){e&&(this.name=e),this.currently_loading=!1,this.loaded=!1,this.is_carousel=t,this.is_nav_section=o||!1};FP_Section.prototype.isNowLoading=function(e){this.currently_loading=e},FP_Section.prototype.isLoaded=function(){this.loaded=!0},FP_Section.prototype.inject=function(e){if(this.is_carousel)$("#fp-carousels-container > .column").append(e).find(".frontpage-carousel-container").last().fadeIn(2700);else if(this.is_nav_section&&!this.loaded){if("get_started_section"===this.name){var t=$("#get_started"),o=t.data("bg");t.css({backgroundImage:"url("+o+")"})}$('.frontpage-side-bar-sections[data-is-section="'+this.name+'"]').html(e).fadeIn(2700),this.isLoaded()}else $("#fp-carousels-container").parent().append(e).find(".outer-section").last().fadeIn(2700)},$(document).ready(function(){Plex.fp=new FP,setTimeout(function(){Plex.fp.loadNextSection()},2e3)}),$(window).scroll(function(){var e=Plex.fp;e&&!e.allSectionsLoaded()&&(e.last_scroll_pos<$(window).scrollTop()&&Plex.fp.loadNextSection(),e.updateScrollPosition($(window).scrollTop()))}),$(document).on("click",".frontpage-custom-icon-bar a.item",function(){var e=$($(this).attr("href"));e.html().indexOf("content ajaxed in on click")!==-1&&e.html('<div class="section-loader-container"><img src="https://s3-us-west-2.amazonaws.com/asset.plexuss.com/news/images/loading.gif" alt="Loading gif"></div>'),Plex.fp.getNavSection($(this).data("section"))});