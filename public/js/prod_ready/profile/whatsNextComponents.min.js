var WhatsNextComponents=React.createClass({displayName:"WhatsNextComponents",getInitialState:function(){return{action:"init",skip:void 0,is_loading:!1,step_data:{}}},componentWillMount:function(){$(document).on("click","#what-is-next",this.getWhatsNext)},getWhatsNext:function(){var e=this;e.setState({is_loading:!0}),$.ajax({url:"/ajax/whatsNext",type:"GET",success:function(t){e.setState({is_loading:!1,step_data:JSON.parse(t)})},error:function(t){e.setState({is_loading:!1})}})},post:function(e){var t=e.target.id,a=t.split("-").pop(),s=new FormData($(".whatsnext-container form")[0]),n=this;$.ajax({url:"/ajax/whatsNext",type:"POST",data:s,enctype:"multipart/form-data",contentType:!1,processData:!1,success:function(e){n.handleAction(a)},error:function(e){console.log(e)}})},handleAction:function(e){switch(e){case"continue":this.getWhatsNext();break;case"save":$("#what-is-next").trigger("click");break;case"skip":}},render:function(){return React.createElement("div",{className:"whatsnext-container"},React.createElement(Display,{"if":this.state.is_loading},React.createElement(LoadingGif,null)),React.createElement(Display,{"if":!this.state.is_loading},React.createElement(Display,{"if":!_.isEmpty(this.state.step_data)},React.createElement("form",null,React.createElement("input",{type:"hidden",name:"step_num",value:this.state.step_data.step_num}),React.createElement(Find_Step,{step:this.state.step_data.step_num,data:this.state.step_data,post:this.post})))))}}),Option_Buttons=React.createClass({displayName:"Option_Buttons",render:function(){return React.createElement("div",{className:"clearfix btn-opts"},React.createElement("div",{id:"wn-is-continue",className:"right continue",onClick:this.props.validate},"Save & Continue"),React.createElement("div",{id:"wn-is-save",className:"right save",onClick:this.props.validate},"Save"))}}),Find_Step=React.createClass({displayName:"Find_Step",render:function(){switch(this.props.step+""){case"1":return React.createElement(Step1,{data:this.props.data,post:this.props.post});case"2":return React.createElement(Step2,{data:this.props.data,post:this.props.post});case"3":return React.createElement(Step3,{data:this.props.data,post:this.props.post});case"4":return React.createElement(Step4,{data:this.props.data,post:this.props.post});case"5":return React.createElement(Step5,{data:this.props.data,post:this.props.post});default:return React.createElement(Step_Done,null)}}}),Step1=React.createClass({displayName:"Step1",getInitialState:function(){return{options:[],countries:[],content:{},step_num:"",has_errors:!1}},componentWillMount:function(){this.getCountries(),this.setState({options:this.getOptions(),content:this.props.data.content,step_num:this.props.data.step_num})},makeCountryOptions:function(e){var t=[];e&&e.length>0&&(t.push(React.createElement("option",{key:-1,value:""},"Select a country")),_.each(e,function(e){t.push(React.createElement("option",{key:e.id,value:e.country_code},e.country_name))}),this.setState({countries:t}))},getCountries:function(){var e=this;$.ajax({url:"/ajax/getAllCountries",type:"GET",success:function(t){e.makeCountryOptions(t)},error:function(e){console.log(e)}})},getOptions:function(){var e=[];return e.push(React.createElement("option",{key:-1,value:""},"Select user type")),e.push(React.createElement("option",{key:0,value:"student"},"Student")),e.push(React.createElement("option",{key:1,value:"alumni"},"Alumni")),e.push(React.createElement("option",{key:2,value:"parent"},"Parent")),e.push(React.createElement("option",{key:3,value:"counselor"},"Counselor")),e.push(React.createElement("option",{key:4,value:"university_rep"},"University Rep")),e},isValid:function(e){var t=$(".whatsnext-container .is-input"),a=!0,s=this;t.length>0?$.each(t,function(){if("zip"===$(this).attr("name")){if(!s.validZip($(this).val()))return a=!1,!1}else if(""===$(this).val())return a=!1,!1}):a=!1,a?this.props.post(e):this.setState({has_errors:!0})},validZip:function(e){if(!e)return!0;if(!(e.indexOf("-")>-1))return!(!_.isNumber(+e)||5!==e.length);var t=e.split("-"),a=null;return!(t.length>2)&&(2===t.length?(a=t[0].concat(t[1]),!(!_.isNumber(+a)||9!==a.length)):void 0)},update:function(e){var t=_.extend({},this.state.content),a=e.target.value,s=e.target.getAttribute("name"),n=!1;"zip"!==s||this.validZip(a)||(n=!0),t[s]=a,this.setState({content:t,has_errors:n})},render:function(){var e=this.state.content,t=this.state.has_errors&&!e.user_type?"is-input has-err":"is-input",a=this.state.has_errors&&!e.country_code?"is-input has-err":"is-input",s=this.state.has_errors&&!this.validZip(e.zip)?"is-input has-err":"is-input";return React.createElement("div",{className:"wn-step"},React.createElement("label",null,"I am a(n)..."),React.createElement("select",{name:"user_type",className:t,value:e.user_type||"",onChange:this.update},this.state.options),React.createElement(Display,{"if":this.state.has_errors&&!e.user_type},React.createElement("div",null,React.createElement("small",{className:"err"},"Please choose a user type"))),React.createElement("label",null,"Country"),React.createElement("select",{name:"country_code",className:a,value:e.country_code||"",onChange:this.update},this.state.countries),React.createElement(Display,{"if":this.state.has_errors&&!e.country_code},React.createElement("div",null,React.createElement("small",{className:"err"},"Please choose your country"))),React.createElement("label",null,"Zip"),React.createElement("input",{name:"zip",className:s,type:"text",onChange:this.update,value:this.props.data.value||"",placeholder:"Enter zip",value:e.zip||""}),React.createElement(Display,{"if":this.state.has_errors&&!this.validZip(e.zip)},React.createElement("div",null,React.createElement("small",{className:"err"},"Please enter your zip code"))),React.createElement(Option_Buttons,{validate:this.isValid}))}}),Step2=React.createClass({displayName:"Step2",getInitialState:function(){return{edu_options:[],gradyr_options:[],content:{},step_num:"",has_errors:!1,result_ui:[],force_close:!1,traversing:!1}},componentWillMount:function(){var e=this;document.addEventListener("keydown",this.keypressed),$(document).on("click","#WhatsNextComponents",function(t){("WhatsNextComponents"===$(t.target).attr("id")||$(t.target).is("label"))&&e.forceClose()}),this.setState({edu_options:this.getEduOptions(),gradyr_options:this.getGradyrOptions(),content:this.props.data.content,step_num:this.props.data.step_num})},componentWillUnmount:function(){$(document).off("click","#WhatsNextComponents"),document.removeEventListener("keydown",this.keypressed)},keypressed:function(e){var t=e.which||e.keyCode;if(this.state.result_ui.length>0){var a=$(".wn-autoresult-container");a.children();40===t?($(".result:first-child").hasClass("highlighted")||this.state.traversing?$(".result:not(:last-child).highlighted").removeClass("highlighted").next().addClass("highlighted"):($(".result.highlighted").removeClass("highlighted"),$(".result:first-child").addClass("highlighted"),this.state.traversing=!0),a.scrollTop($(".result.highlighted").offset().top-a.offset().top+a.scrollTop())):38===t?($(".result:not(:first-child).highlighted").removeClass("highlighted").prev().addClass("highlighted"),a.scrollTop($(".result.highlighted").offset().top-a.offset().top+a.scrollTop())):13===t&&(e.preventDefault(),$(".result.highlighted").trigger("click"))}},notTraversing:function(){this.state.traversing=!1},getEduOptions:function(){var e=[];return e.push(React.createElement("option",{key:"-2",value:""},"Select education level")),e.push(React.createElement("option",{key:"0",value:"0"},"High School")),e.push(React.createElement("option",{key:"1",value:"1"},"College")),e},getGradyrOptions:function(){var e=[],t=new Date,a=t.getFullYear(),s=15;e.push(React.createElement("option",{key:-1,value:""},"Select a year"));for(var n=0;n<s;n++)e.push(React.createElement("option",{key:a,value:a+""},a)),a++;return e},isValid:function(e){var t=$(".whatsnext-container .is-input"),a=!0;t.length>0?$.each(t,function(){if(""===$(this).val())return a=!1,!1}):a=!1,a?this.props.post(e):this.setState({has_errors:!0})},update:function(e){var t=_.extend({},this.state.content),a=e.target.value,s=e.target.getAttribute("name");this.notTraversing(),"school_name"===s&&this.autocomplete(a),t[s]=a,this.setState({content:t})},autocomplete:function(e){var t=this,a=_.extend({},this.state.content),s=a.in_college,n="/ajax/searchForHighSchools";s&&s+""=="1"&&(n="/ajax/searchForColleges"),e&&$.ajax({url:n,type:"POST",data:{input:e},success:function(e){e&&e.length>0&&t.buildResultUI(e)},error:function(e){}})},buildResultUI:function(e){var t=[],a=this;_.each(e,function(e){t.push(React.createElement("div",{key:e.id,"data-id":e.id,className:"result",onClick:a.schoolChosen},e.school_name))}),this.setState({result_ui:t})},schoolChosen:function(e){var t=$(e.target).text(),a=_.extend({},this.state.content);a.school_name=t,this.setState({content:a,force_close:!0})},resetForceClose:function(){this.setState({force_close:!1})},forceClose:function(){this.setState({force_close:!0})},render:function(){var e=this.state.content,t=this.state.has_errors&&!e.in_college?"is-input has-err":"is-input",a=this.state.has_errors&&!e.school_name?"is-input has-err":"is-input",s=this.state.has_errors&&!e.grad_year?"is-input has-err":"is-input";return React.createElement("div",{className:"wn-step"},React.createElement("label",null,"Level of Education"),React.createElement("select",{className:t,name:"in_college",value:e.in_college?e.in_college+""||"":"",onChange:this.update},this.state.edu_options),React.createElement(Display,{"if":this.state.has_errors&&!e.in_college},React.createElement("div",null,React.createElement("small",{className:"err"},"Please choose your education level"))),React.createElement("label",null,"School name"),React.createElement("div",{className:"wn-school-name-container"},React.createElement("input",{className:a,name:"school_name",type:"text",value:e.school_name||"",placeholder:"Enter school name",onChange:this.update,onBlur:this.notTraversing,onFocus:this.resetForceClose,autoComplete:"off"}),React.createElement(Display,{"if":this.state.has_errors&&!e.school_name},React.createElement("div",null,React.createElement("small",{className:"err"},"Please search and select your school"))),React.createElement(Display,{"if":this.state.result_ui&&this.state.result_ui.length>0},React.createElement(Display,{"if":!this.state.force_close},React.createElement("div",{className:"wn-autoresult-container"},this.state.result_ui)))),React.createElement("label",null,"Graduation year"),React.createElement("select",{className:s,name:"grad_year",value:e.grad_year+""||"",onChange:this.update},this.state.gradyr_options),React.createElement(Display,{"if":this.state.has_errors&&!e.grad_year},React.createElement("div",null,React.createElement("small",{className:"err"},"Please select your estimated graduation year"))),React.createElement(Option_Buttons,{validate:this.isValid}))}}),Step3=React.createClass({displayName:"Step3",getInitialState:function(){return{content:{},step_num:"",has_errors:!1,year_options:[],term_options:[]}},componentWillMount:function(){this.setState({content:this.props.data.content,step_num:this.props.data.step_num,year_options:this.getYearOptions(),term_options:this.getTermOptions()})},getTermOptions:function(){var e=[];return e.push(React.createElement("option",{key:-1,value:""},"Select a term")),e.push(React.createElement("option",{key:0,value:"spring"},"Spring")),e.push(React.createElement("option",{key:1,value:"fall"},"Fall")),e},getYearOptions:function(){var e=[],t=new Date,a=t.getFullYear(),s=10;e.push(React.createElement("option",{key:-1,value:""},"Select a year"));for(var n=0;n<s;n++)e.push(React.createElement("option",{key:a,value:a+""},a)),a++;return e},update:function(e){var t=_.extend({},this.state.content),a=e.target.value,s=e.target.getAttribute("name");t[s]=a,this.setState({content:t})},isValid:function(e){var t=$(".whatsnext-container .is-input"),a=!0;t.length>0?$.each(t,function(){if(""===$(this).val())return a=!1,!1}):a=!1,a?this.props.post(e):this.setState({has_errors:!0})},render:function(){var e=this.state.content,t=this.state.has_errors&&!e.planned_start_term?"is-input has-err":"is-input",a=this.state.has_errors&&!e.planned_start_yr?"is-input has-err":"is-input";return React.createElement("div",{className:"wn-step"},React.createElement("label",null,"Planned start term"),React.createElement("select",{className:t,name:"planned_start_term",value:e.planned_start_term||"",onChange:this.update},this.state.term_options),React.createElement(Display,{"if":this.state.has_errors&&!e.planned_start_term},React.createElement("div",null,React.createElement("small",{className:"err"},"Please choose the term in which you plan to start college."))),React.createElement("label",null,"Planned start year"),React.createElement("select",{className:a,name:"planned_start_yr",value:e.planned_start_yr||"",onChange:this.update},this.state.year_options),React.createElement(Display,{"if":this.state.has_errors&&!e.planned_start_yr},React.createElement("div",null,React.createElement("small",{className:"err"},"Please choose the year in which you plan to start college."))),React.createElement(Option_Buttons,{validate:this.isValid}))}}),Step4=React.createClass({displayName:"Step4",getInitialState:function(){return{content:{},step_num:"",degrees:[],school_type:[],has_errors:!1,major_results_ui:[],profession_results_ui:[],majors_force_close:!1,professions_force_close:!1,traversing:!1}},componentWillMount:function(){var e=this;document.addEventListener("keydown",this.keypressed),$(document).on("click","#WhatsNextComponents",function(t){("WhatsNextComponents"===$(t.target).attr("id")||$(t.target).is("label"))&&e.forceClose()}),this.setState({content:this.props.data.content,step_num:this.props.data.step_num,degrees:this.getDegreeOptions(),school_type:this.getSchoolTypeOptions()})},componentWillUnmount:function(){document.removeEventListener("keydown",this.keypressed),$(document).off("click","#WhatsNextComponents")},keypressed:function(e){var t=e.which||e.keyCode;if(this.state.major_results_ui.length>0||this.state.profession_results_ui.length>0){var a=$(".wn-autoresult-container");a.children();40===t?($(".result:first-child").hasClass("highlighted")||this.state.traversing?$(".result:not(:last-child).highlighted").removeClass("highlighted").next().addClass("highlighted"):($(".result.highlighted").removeClass("highlighted"),$(".result:first-child").addClass("highlighted"),this.state.traversing=!0),a.scrollTop($(".result.highlighted").offset().top-a.offset().top+a.scrollTop())):38===t?($(".result:not(:first-child).highlighted").removeClass("highlighted").prev().addClass("highlighted"),a.scrollTop($(".result.highlighted").offset().top-a.offset().top+a.scrollTop())):13===t&&$(".result.highlighted").trigger("click")}},notTraversing:function(){this.state.traversing=!1},getDegreeOptions:function(){var e=this.props.data.degree,t=[];return e&&e.length>0&&(t.push(React.createElement("option",{key:-1,value:""},"Select a degree")),_.each(e,function(e){t.push(React.createElement("option",{key:e.id,value:e.id},e.display_name))})),t},getSchoolTypeOptions:function(){var e=[];return e.push(React.createElement("option",{key:-2,value:""},"Select a school type")),e.push(React.createElement("option",{key:-3,value:"0"},"Campus only")),e.push(React.createElement("option",{key:-4,value:"1"},"Online only")),e.push(React.createElement("option",{key:-5,value:"2"},"Both")),e},autocomplete:function(e,t){var a=this,s=_.extend({},this.state.content),n=(s.in_college,"/ajax/searchForMajors");e&&"profession_name"===e&&(n="/ajax/searchForProfessions"),t&&$.ajax({url:n,type:"POST",data:{input:t},success:function(t){t&&t.length>0&&a.buildResultUI(e,t)},error:function(e){}})},buildResultUI:function(e,t){var a=[],s=this;_.each(t,function(t){"major_name"===e?a.push(React.createElement("div",{key:t.id,"data-id":t.id,className:"result major",onClick:s.schoolChosen},t.name)):a.push(React.createElement("div",{key:t.id,"data-id":t.id,className:"result profession",onClick:s.schoolChosen},t.profession_name))}),"major_name"===e?this.setState({major_results_ui:a}):this.setState({profession_results_ui:a})},schoolChosen:function(e){var t=$(e.target).text(),a=$(e.target).data("id"),s=_.extend({},this.state.content),n=$(e.target).hasClass("major")?"major":"profession";s[n+"_name"]=t,s[n+"_id"]=a,this.state.content=s,"major"===n?this.setState({majors_force_close:!0}):this.setState({professions_force_close:!0})},isValid:function(e){var t=$(".whatsnext-container .is-input"),a=!0;t.length>0?$.each(t,function(){if(""===$(this).val())return a=!1,!1}):a=!1,a?this.props.post(e):this.setState({has_errors:!0})},update:function(e){var t=_.extend({},this.state.content),a=e.target.value,s=e.target.getAttribute("name");s.split("_")[0];this.notTraversing(),"major_name"!==s&&"profession_name"!==s||this.autocomplete(s,a),t[s]=a,this.setState({content:t})},resetForceClose:function(e){var t=e.target.getAttribute("name");"major_id"===t?this.setState({majors_force_close:!1}):this.setState({professions_force_close:!1})},forceClose:function(){this.setState({majors_force_close:!0,professions_force_close:!0})},render:function(){var e=this.state.content,t=this.state.has_errors&&!e.degree_id?"is-input has-err":"is-input",a=this.state.has_errors&&!e.major_name?"is-input has-err":"is-input",s=this.state.has_errors&&!e.profession_name?"is-input has-err":"is-input",n=!this.state.has_errors||e.interested_school_type+""?"is-input":"is-input has-err";return React.createElement("div",{className:"wn-step"},React.createElement("label",null,"Choose a degree"),React.createElement("select",{className:t,name:"degree_id",value:e.degree_id||"",onChange:this.update},this.state.degrees),React.createElement(Display,{"if":this.state.has_errors&&!e.degree_id},React.createElement("div",null,React.createElement("small",{className:"err"},"Please select a desired degree."))),React.createElement("label",null,"Choose a major"),React.createElement("div",{className:"wn-school-name-container"},React.createElement("input",{type:"hidden",value:e.major_id||"",name:"major_id"}),React.createElement("input",{className:a,name:"major_name",type:"text",value:e.major_name||"",placeholder:"Enter school name",onChange:this.update,onBlur:this.notTraversing,onFocus:this.resetForceClose,autoComplete:"off"}),React.createElement(Display,{"if":this.state.has_errors&&!e.major_name},React.createElement("div",null,React.createElement("small",{className:"err"},"Please search and select at least one desired major."))),React.createElement(Display,{"if":this.state.major_results_ui&&this.state.major_results_ui.length>0},React.createElement(Display,{"if":!this.state.majors_force_close},React.createElement("div",{className:"wn-autoresult-container"},this.state.major_results_ui)))),React.createElement("label",null,"Choose a profession"),React.createElement("div",{className:"wn-school-name-container"},React.createElement("input",{type:"hidden",value:e.profession_id||"",name:"profession_id"}),React.createElement("input",{className:s,name:"profession_name",type:"text",value:e.profession_name||"",placeholder:"Enter school name",onChange:this.update,onBlur:this.notTraversing,onFocus:this.resetForceClose,autoComplete:"off"}),React.createElement(Display,{"if":this.state.has_errors&&!e.profession_name},React.createElement("div",null,React.createElement("small",{className:"err"},"Please search and select a desired profession."))),React.createElement(Display,{"if":this.state.profession_results_ui&&this.state.profession_results_ui.length>0},React.createElement(Display,{"if":!this.state.professions_force_close},React.createElement("div",{className:"wn-autoresult-container"},this.state.profession_results_ui)))),React.createElement("label",null,"Choose the type of school"),React.createElement("select",{className:n,name:"interested_school_type",value:e.interested_school_type+""||"",onChange:this.update},this.state.school_type),React.createElement(Display,{"if":this.state.has_errors&&!(e.interested_school_type+"")},React.createElement("div",null,React.createElement("small",{className:"err"},"Please select the type of desired school."))),React.createElement(Option_Buttons,{validate:this.isValid}))}}),Step5=React.createClass({displayName:"Step5",getInitialState:function(){return{content:{},step_num:"",has_errors:!1,financial_options:[]}},componentWillMount:function(){this.setState({content:this.props.data.content,step_num:this.props.data.step_num,financial_options:this.getFinancialOptions()})},getFinancialOptions:function(){var e=[],t=[[0],[0,5],[5,10],[10,20],[20,30],[30,50],[50]],a="",s="";e.push(React.createElement("option",{key:-1,value:""},"Select one..."));for(var n=0;n<t.length;n++)0===n&&1===t[n].length?(a="$"+t[n][0],s=a.substr(1)):n===t.length-1&&1===t[n].length?(a="$"+t[n][0]+",000+",s=a.substring(1,a.length-1)):2===t[n].length&&(a=0===t[n][0]?"$"+t[n][0]+" - $"+t[n][1]+",000":"$"+t[n][0]+",000 - $"+t[n][1]+",000",s=a.split("$").join("")),e.push(React.createElement("option",{key:n,value:s},a));return e},isValid:function(e){var t=$(".whatsnext-container .is-input"),a=!0,s=this;t.length>0?$.each(t,function(){return"overall_gpa"!==$(this).attr("name")||s.isValidGPA($(this).val())?""===$(this).val()?(a=!1,!1):void 0:(a=!1,!1)}):a=!1,a?this.props.post(e):this.setState({has_errors:!0})},isValidGPA:function(e){if(!e)return!1;if(e.indexOf(".")>-1){var t=e.split(".");if(2!==t.length)return!1;if(+t[0]<0||+t[0]>4)return!1;if(+t[1]<0||+t[1]>99)return!1;if(+t[0]<=0&&+t[1]<=0)return!1}else if(e.length>1||+e<=0||+e>4)return!1;return!0},update:function(e){var t=_.extend({},this.state.content),a=e.target.value,s=e.target.getAttribute("name");t[s]=a,this.setState({content:t})},render:function(){var e=this.state.content,t=this.isValidGPA(e.overall_gpa),a=this.state.has_errors&&!e.financial_firstyr_affordibility?"is-input has-err":"is-input",s=this.state.has_errors&&!t?"is-input has-err":"is-input",n=e.financial_firstyr_affordibility?e.financial_firstyr_affordibility.split(".")[0]:"";return React.createElement("div",{className:"wn-step"},React.createElement("label",null,"How much can you and your family contribute towards your college education?"),React.createElement("select",{className:a,name:"financial_firstyr_affordibility",value:n,onChange:this.update},this.state.financial_options),React.createElement(Display,{"if":this.state.has_errors&&!e.financial_firstyr_affordibility},React.createElement("div",null,React.createElement("small",{className:"err"},"Please enter the estimated amount you and your family would be able to afford."))),React.createElement("label",null,"Enter your overall gpa"),React.createElement("input",{className:s,type:"number",value:e.overall_gpa||"",name:"overall_gpa",onChange:this.update,placeholder:"Ex: 3.45",min:"0.01",max:"4",step:"0.01"}),React.createElement(Display,{"if":this.state.has_errors&&!t},React.createElement("div",null,React.createElement("small",{className:"err"},"Please enter your gpa. Range: 0.01 - 4.00"))),React.createElement(Option_Buttons,{validate:this.isValid}))}}),Step_Done=React.createClass({displayName:"Step_Done",render:function(){return React.createElement("div",{className:"wn-done"},React.createElement("h5",null,"You are now recruitment ready!"),React.createElement("div",null,"By increasing your profile percentage and filling out your profile, you are increasing your chances of getting recruited."),React.createElement("div",{className:"mt20"},"Let's finish your "," ",React.createElement("a",{href:"/profile"},"profile"),"!"))}}),LoadingGif=React.createClass({displayName:"LoadingGif",render:function(){return React.createElement("div",{className:"text-center"},React.createElement("img",{className:"loader",src:"https://s3-us-west-2.amazonaws.com/asset.plexuss.com/profile/ajax_loader.gif"}))}}),Display=React.createClass({displayName:"Display",render:function(){return this.props["if"]?React.createElement("div",null,this.props.children):null}});ReactDOM.render(React.createElement(WhatsNextComponents,null),document.getElementById("WhatsNextComponents"));